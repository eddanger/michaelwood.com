<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>MichaelWood.com Terminal</title>
  <style>
    /* Terminal styling */
    body {
      margin: 0;
      padding: 0;
      background-color: #000;
      color: #33FF33;
      font-family: "Courier New", Courier, monospace;
      height: 100vh;
      overflow: hidden;
    }
    #terminal {
      box-sizing: border-box;
      padding: 10px;
      height: 100vh;
      overflow-y: auto;
      white-space: pre-wrap;
    }
    /* Each prompt line will be a simple inline container */
    .prompt-line {
      /* We no longer use flex so that the caret appears right after the text */
    }
    .prompt-line > span {
      display: inline;
    }
    .prompt-text {
      /* Static prompt text, e.g.: "michaelwood:~$ " */
    }
    .cmd-input {
      outline: none;
      border: none;
      background: none;
      color: inherit;
      display: inline;
      font-family: inherit;
      font-size: inherit;
      caret-color: transparent; /* Hide the native caret */
      min-width: 10px; /* Ensure there's always room for the caret */
    }
    /* Blinking caret implemented as a pseudo-element */
    .cmd-input:after {
      content: "";
      display: inline-block;
      width: 10px;
      height: 1em;
      background-color: #33FF33;
      margin-left: 2px;
      animation: blink 1s steps(1) infinite;
    }
    @keyframes blink {
      50% { opacity: 0; }
    }
  </style>
</head>
<body>
  <div id="terminal"></div>

  <script>
    /**************************
     * COMMAND CONFIGURATION  *
     **************************/
    
    // Define a set of available commands and their behaviors.
    const availableCommands = {
      "./github": function() {
        // Opens GitHub profile in a new tab.
        window.open("https://github.com/eddanger", "_blank");
        return "Opening GitHub...";
      },
      "help": function() {
        return "Available commands: ls, ./github, help, pwd, whoami, su, date, man, uptime, clear";
      },
      "pwd": function() {
        return "/home/michaelwood";
      },
      "whoami": function() {
        return "michaelwood";
      },
      "su": function() {
        return "Permission denied: Superuser mode is not available on this terminal.";
      },
      "date": function() {
        return new Date().toString();
      },
      "man": function() {
        return "No manual entry for that command. Perhaps you should write one!";
      },
      "uptime": function() {
        return "Uptime: forever and a day. Time flies when you're having fun!";
      }
      // Add more commands here if desired.
    };

    /**
     * Process the entered command and return output.
     */
    function processCommand(cmd) {
      cmd = cmd.trim();
      if (cmd === "") return "";
      
      // 'ls' command (with any flags) lists available commands.
      if (cmd.match(/^ls(\s+.*)?$/)) {
        let output = "Available commands:\n";
        for (let command in availableCommands) {
          output += "  " + command + "\n";
        }
        output += "\nType a command (e.g., ./github) to launch it.";
        return output;
      }
      
      // 'clear' clears the terminal.
      if (cmd === "clear") {
        terminal.innerHTML = "";
        return "";
      }
      
      // If the command exists, execute it.
      if (availableCommands.hasOwnProperty(cmd)) {
        const result = availableCommands[cmd]();
        return result;
      }
      
      // Unknown command.
      return "command not found: " + cmd;
    }

    /****************************
     * TERMINAL RENDERING LOGIC *
     ****************************/
    
    const terminal = document.getElementById('terminal');

    /**
     * Creates a new prompt line with a blinking caret.
     */
    function createPrompt() {
      const promptLine = document.createElement('div');
      promptLine.className = 'prompt-line';

      // Static prompt text.
      const promptText = document.createElement('span');
      promptText.className = 'prompt-text';
      promptText.textContent = 'michaelwood:~$ ';

      // Editable input span.
      const inputSpan = document.createElement('span');
      inputSpan.className = 'cmd-input';
      inputSpan.contentEditable = true;

      promptLine.appendChild(promptText);
      promptLine.appendChild(inputSpan);
      terminal.appendChild(promptLine);
      terminal.scrollTop = terminal.scrollHeight;
      inputSpan.focus();
      
      // Attach keydown handler.
      inputSpan.addEventListener('keydown', handleInput);
      
      return inputSpan;
    }
    
    /**
     * Handles the key events on the current input prompt.
     */
    function handleInput(event) {
      if (event.key === 'Enter') {
        event.preventDefault();  // Prevent a newline from being inserted.
        const inputSpan = event.target;
        const command = inputSpan.textContent.trim();
        
        // Replace the prompt with a static line showing the command.
        const commandLine = document.createElement('div');
        commandLine.textContent = 'michaelwood:~$ ' + command;
        const currentLine = inputSpan.parentElement;
        terminal.replaceChild(commandLine, currentLine);
        
        // Process the command and show output.
        const output = processCommand(command);
        if (output) {
          const outputLine = document.createElement('div');
          outputLine.textContent = output;
          terminal.appendChild(outputLine);
        }
        
        // Create a new prompt.
        createPrompt();
      }
    }
    
    // When the user clicks anywhere on the terminal, focus the current input.
    terminal.addEventListener('click', () => {
      const currentInput = document.querySelector('.cmd-input');
      if (currentInput) {
        currentInput.focus();
      }
    });
    
    // Start the terminal by creating the first prompt.
    createPrompt();
  </script>
</body>
</html>
